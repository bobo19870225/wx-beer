<wxs src="../../format.wxs" module="filter" />
<cu-custom bgColor="bg-white" isBack="{{true}}">
  <view slot="backText">返回</view>
  <view slot="content">会员管理</view>
</cu-custom>
<!-- 店铺 -->
<shopBar bind:onShopChange="onShopChange" isShopManage="{{true}}"></shopBar>

<view class='cu-load load-modal' wx:if="{{isLoading}}">
  <!-- <image src='/images/logo.png' class='png' mode='aspectFit'></image> -->
  <view class='gray-text text-xs'>加载中...</view>
</view>
<!-- 有数据 -->
<view wx:if="{{ list.length > 0 }}">
  <scroll-view scroll-y="true" style="height: {{containerHeight-110}}rpx;" refresher-enabled="true" bindrefresherrefresh="loadData" refresher-triggered="{{isRefreshing}}" bindscrolltolower="loadMore">
    <block wx:for="{{ list }}" wx:key="_id" wx:for-index="index">
      <view class="cu-list menu ">
        <view class="cu-item">
          <view class="content">
            <view class="text-gray  flex" style="gap: 21rpx;">
              <view>{{ item.user.name||'未知昵称' }}</view>
              <view class="text-sm">{{ item.user.phone||'未设置电话' }}</view>
            </view>

            <view class="text-gray text-sm flex" style="gap: 21rpx;">
              <view class="text-green text-sm">
                账户余额：<span class="text-price">{{filter.formatMoney(item.account.balance)}}</span>
              </view>
              <view style="color: gray;">
                剩余存酒：{{item.account.beer}}瓶
              </view>
              <view style="color: gray;">
                充值金额：<span class="text-price">{{filter.formatMoney(item.account.recharge)}}</span>
              </view>
            </view>

            <view class="text-grey text-xs">
              更新时间：{{filter.format(item.updateDate,'YY-MM-DD hh:mm:ss') }}
            </view>
          </view>
        </view>
      </view>
    </block>
  </scroll-view>
</view>
<!-- 无数据 -->
<block wx:else>
  <view style="text-align: center;margin-top: 20vh;">
    <image style="width: 50vw;" src="../../../images/icons/no-data.svg" mode="widthFix" />
    <view style="top: -240rpx;">暂无数据</view>
  </view>
</block>