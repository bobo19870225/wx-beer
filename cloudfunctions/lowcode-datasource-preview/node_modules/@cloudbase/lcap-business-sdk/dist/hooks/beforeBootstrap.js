"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.beforeBootstrap = void 0;
const util_1 = __importDefault(require("util"));
const dayjs_1 = __importDefault(require("dayjs"));
const utc_1 = __importDefault(require("dayjs/plugin/utc"));
const timezone_1 = __importDefault(require("dayjs/plugin/timezone"));
/**
 * 加载day.js的插件
 */
function loadDayjsPlugin() {
    dayjs_1.default.extend(utc_1.default);
    dayjs_1.default.extend(timezone_1.default);
}
/**
 * 低版本 Node.js 方法的 polyfill（数据源版本是 Node v10）
 */
function polyfillGlobalObj() {
    // 兼容 node10 以及以下的版本
    global.TextEncoder = typeof TextEncoder === 'function'
        ? TextEncoder
        : util_1.default.TextEncoder;
    global.TextDecoder = typeof TextDecoder === 'function'
        ? TextDecoder
        : util_1.default.TextDecoder;
}
function beforeBootstrap() {
    loadDayjsPlugin();
    polyfillGlobalObj();
}
exports.beforeBootstrap = beforeBootstrap;
