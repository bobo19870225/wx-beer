"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.provider = exports.getAuthData = void 0;
/**
 * 腾讯会议
 * https://lbs.qq.com/service/webService/webServiceGuide/webServiceOverview
 */
const utils_1 = require("./utils");
const common_1 = require("../../common");
async function getAuthData(dsId) {
    const dsToken = await (0, utils_1.getToken)(dsId);
    const authInfo = dsToken === null || dsToken === void 0 ? void 0 : dsToken.QQMapToken;
    if (!authInfo || !authInfo.Key) {
        throw new common_1.TCBError('FnError.HTTP.TokenNotAvailable', `无法获取数据源${dsId}对应的腾讯地图Token信息`, {
            reason: `unable to get Tencent Map token of datasource ${dsId}`,
        });
    }
    return {
        authInfo,
        qs: { key: authInfo.Key },
    };
}
exports.getAuthData = getAuthData;
exports.provider = {
    getAuthData,
};
