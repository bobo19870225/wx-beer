const { v4: uuidV4 } = require('uuid');
const murmurhash = require('murmurhash');

const DEFAULT_OPTS = {
  prefix: '',
  suffix: '',
};

/**
 * 生成随机的ID
 * @returns {string}
 */
function makeId(opts = DEFAULT_OPTS) {
  const { prefix, suffix } = {
    ...DEFAULT_OPTS,
    ...opts,
  };
  return prefix + murmurhash(uuidV4()) + suffix;
}

/**
 * 生成随机的 SPU ID
 * @returns {string}
 */
const makeSpuId = () => makeId({ prefix: 'spu-' });

/**
 * 生成随机的 SKU ID
 * @returns {string}
 */
const makeSkuId = () => makeId({ prefix: 'sku-' });

module.exports = {
  makeId,
  makeSkuId,
  makeSpuId,
};
